<!DOCTYPE html>
<html>

<head>
    <title>Smart Coffee Advisor</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        #arjsScene {
            width: 80vw;
            /* 80% of the viewport width */
            height: 80vh;
            /* 80% of the viewport height */
            margin: auto;
            /* Center the scene */
            /* Adjust the following to get the desired aspect ratio */
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false;" loading-screen="enabled: false;"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" id="arjsScene" embedded
        gesture-detector>
        <a-marker preset="hiro">
            <a-text value="Your Coffee!" position="-0.5 0.5 0" scale="1 1 1"></a-text>
            <a-entity id="coffeeModel" position="0 0 0" scale="0.5 0.5 0.5"></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
</body>

<script>
    function selectCoffeeType() {
        const hours = new Date().getHours();
        let coffeeType = "";

        const models = {
            "Espresso": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Americano": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Latte": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Cappuccino": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Flat White": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Mocha": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae",
            "Decaf": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/PlasticCoffeeCup.dae",
            "Herbal Tea": "https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/TeaGlass.dae"
        };

        if (hours < 10) {
            coffeeType = "Espresso";
        } else if (hours < 12) {
            coffeeType = "Americano";
        } else if (hours < 14) {
            coffeeType = "Latte";
        } else if (hours < 16) {
            coffeeType = "Cappuccino";
        } else if (hours < 18) {
            coffeeType = "Flat White";
        } else if (hours < 20) {
            coffeeType = "Mocha";
        } else if (hours < 22) {
            coffeeType = "Decaf";
        } else {
            coffeeType = "Herbal Tea";
        }

        let modelUrl = models[coffeeType];
        return { coffeeType, modelUrl };
    }

    document.addEventListener('DOMContentLoaded', () => {
        const marker = document.querySelector('a-marker');
        const textElement = document.querySelector('a-text');
        const coffeeModel = document.querySelector('#coffeeModel');

        marker.addEventListener('markerFound', () => {
            const { coffeeType, modelUrl } = selectCoffeeType();
            textElement.setAttribute('value', `Time for a ${coffeeType}!`);
            coffeeModel.setAttribute('collada-model', "url(" + modelUrl + ")");
        });
    });

</script>

</html>