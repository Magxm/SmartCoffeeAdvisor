<!DOCTYPE html>
<html>

<head>
    <title>Smart Coffee Advisor</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
    </style>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true;" embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;">
        <a-assets>
            <a-asset-item id="coffeCup"
                src="https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/CoffeeCup.dae"></a-asset-item>
            <a-asset-item id="plasticCup"
                src="https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/PlasticCoffeeCup.dae"></a-asset-item>
            <a-asset-item id="teaCup"
                src="https://raw.githack.com/Magxm/SmartCoffeeAdvisor/main/resources/TeaGlass.dae"></a-asset-item>
        </a-assets>

        <a-marker preset="hiro">
            <a-text value="Your Coffee Text!" position="-0.7 1.2 0" scale="1 1 1"></a-text>
            <!-- <a-entity
                gltf-model="https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/scene.gltf"
                scale="0.1 0.1 0.1" position="0 0 0"> -->
            <a-entity id="coffeeModel" collada-model="#coffeCup" position="0 0 0" scale="0.1 0.1 0.1"></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
</body>

<script>
    function selectCoffeeType() {
        const hours = new Date().getHours();
        let coffeeType = "";

        const models = {
            "Espresso": "coffeCup",
            "Americano": "coffeCup",
            "Latte": "coffeCup",
            "Cappuccino": "coffeCup",
            "Flat White": "coffeCup",
            "Mocha": "coffeCup",
            "Decaf": "coffeCup",
            "Herbal Tea": "coffeCup"
        };

        if (hours < 7)
            coffeeType = "Herbal Tea";
        else if (hours < 9) {
            coffeeType = "Decaf";
        } else if (hours < 10) {
            coffeeType = "Espresso";
        } else if (hours < 12) {
            coffeeType = "Americano";
        } else if (hours < 14) {
            coffeeType = "Latte";
        } else if (hours < 16) {
            coffeeType = "Cappuccino";
        } else if (hours < 18) {
            coffeeType = "Flat White";
        } else if (hours < 20) {
            coffeeType = "Mocha";
        } else if (hours < 22) {
            coffeeType = "Decaf";
        } else {
            coffeeType = "Herbal Tea";
        }

        let modelAsset = models[coffeeType];
        return { coffeeType, modelAsset };
    }

    document.addEventListener('DOMContentLoaded', () => {
        const marker = document.querySelector('a-marker');
        const textElement = document.querySelector('a-text');
        const coffeeModel = document.querySelector('#coffeeModel');

        marker.addEventListener('markerFound', () => {
            const { coffeeType, modelAsset } = selectCoffeeType();
            textElement.setAttribute('value', `Time for a ${coffeeType}!`);
            coffeeModel.setAttribute('collada-model', "#" + modelAsset);
            console.log("Found a marker!");
            console.log("Coffee type: " + coffeeType);
            console.log("Model Asset: " + modelAsset);
        });
    });

</script>

</html>